<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Лабораторная работа №4</title>

    <link rel="stylesheet" type="text/css" href="../Оболочка/msu.css">
    <link rel="stylesheet" type="text/css" href="../Оболочка/fancybox/jquery.fancybox-1.3.4.css" media="screen">

    <script type="text/javascript" src="../Оболочка/jquery.pack.js"></script>
    <script type="text/javascript" src="../Оболочка/Components.js"></script>
    <script type="text/javascript" src="../Оболочка/fancybox/jquery.mousewheel-3.0.4.pack.js"></script>
    <script type="text/javascript" src="../Оболочка/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
    <script type="text/javascript" src="../Оболочка/highlight.pack.js"></script>
    <script type="text/javascript">hljs.initHighlightingOnLoad('avrasm')</script>

    <script type="text/javascript">
        $(document).ready(function () {
            $("a.images").fancybox({
                'transitionIn': 'fade',
                'transitionOut': 'fade',
                'titlePosition': 'inside',
                'padding': 10,
                'cyclic': true
            });
        });
        $(function () {
            $('div.post_body, div.signature').each(function () {
                initPost($(this))
            });
        });
    </script>
</head>

<body bgcolor=#E6E6E6 topmargin=1 leftmargin=1 marginwidth=0 marginheight=0 style="max-width: 1300px;">
<div class=max>
<a name="top"></a>
  <table border=0 width=100% cellspacing=0 cellpadding=0>
    <tr>
      <td width="190" height="91" name="link19"><a href="../index.html"><img src="../Оболочка/images/bg01.gif" alt=""></a></td>
      <td rowspan="2" background=../Оболочка/images/bg02.gif height="120" valign="bottom">
        <table background=../Оболочка/images/raspor.gif border=0 cellspacing=0 cellpadding=0>
          <tr> <td width=180></td> <td valign="top" height="75"><p class=h6>Лабораторная работа №4</p></td> </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td background=../Оболочка/images/bg03.gif>
        <a href=../Программа/index.html onMouseOver="mOver(1)" onMouseOut="mOut(1)">
		  <img src=../Оболочка/images/01a.gif border=0 width=190 height=29 alt="Рабочая программа" name="link1"></a><br>
      </td>
    </tr>
    <tr>
      <td background=../Оболочка/images/bg03.gif>
        <a href=../Теория/micro.html onMouseOver="mOver(2)" onMouseOut="mOut(2)">
		  <img src=../Оболочка/images/02a.gif width=190 height=29 border=0 alt="Теоретическая часть" name="link2"></a><br>
      </td>
    </tr>
    <tr>
      <td background=../Оболочка/images/bg09.gif valign=Top>
        <table border=0 cellspacing=0 cellpadding=0>
            <tr>
                <td background=../Оболочка/images/bg04.gif width=190 valign=Top>
                    <img src=../Оболочка/images/03p.gif border=0 width=190 height=29 alt="Практика. Часть 1"><br>
                </td>
            <tr>
                <td background=../Оболочка/images/bg05.gif width=190 valign=Top>
                    <a href="part_1.html" onMouseOver="mOver(31)" onMouseOut="mOut(31)"><img src=../Оболочка/images/03a_1.gif width=170 height=22 border=0 alt="Отладочная платформа" name="link31"></a></td>
            </tr>
            <tr>

              <td background=../Оболочка/images/bg06.gif width=190 height=38 valign=Top>
                <a href="laba1_1.html" onMouseOver="mOver(32)" onMouseOut="mOut(32)"><img src=../Оболочка/images/03a_2.gif width=170 height=22 border=0 alt="Лабораторная работа 1" name="link32"></a><br>
                <a href="laba1_2.html" onMouseOver="mOver(33)" onMouseOut="mOut(33)"><img src=../Оболочка/images/03a_3.gif width=170 height=20 border=0 alt="Лабораторная работа 2" name="link33"></a><br>
                <a href="laba1_3.html" onMouseOver="mOver(34)" onMouseOut="mOut(34)"><img src=../Оболочка/images/03a_4.gif width=170 height=36 border=0 alt="Лабораторная работа 3" name="link34"><br>
                <img src=../Оболочка/images/03p_5.gif width=170 height=36 border=0 alt="Лабораторная работа 4" name="link35"></a><br>
                <a href="laba1_5.html" onMouseOver="mOver(36)" onMouseOut="mOut(36)"><img src=../Оболочка/images/03a_6.gif width=170 height=32 border=0 alt="Лабораторная работа 5" name="link36"></a><br>
                <a href="app.html" onMouseOver="mOver(37)" onMouseOut="mOut(37)"><img src=../Оболочка/images/03a_7.gif width=170 height=20 border=0 alt="Приложение" name="link37"></a><br>
                  <img src=../Оболочка/images/bg07.gif width=190 height=23><br>
              </td>

            </tr>
            <tr>
              <td background=../Оболочка/images/bg03.gif valign=Top>
                <a href="part_2.html" onMouseOver="mOver(4)" onMouseOut="mOut(4)"><img src=../Оболочка/images/04a.gif width=190 height=29 border=0 alt="Практическая часть 2" name="link4"></a><br>
                <a href=../Заочное/index.html onMouseOver="mOver(5)" onMouseOut="mOut(5)"><img src=../Оболочка/images/05a.gif width=190 height=29 border=0 alt="Заочное" name="link5"></a><br>
                <a href=../Контроль_знаний/index.html onMouseOver="mOver(6)" onMouseOut="mOut(6)"><img src=../Оболочка/images/06a.gif width=190 height=29 border=0 alt="Контроль знаний" name="link6"></a><br>
                <img src=../Оболочка/images/bg08.gif width=190 height=13><br>

        </table>
        </td>
        <td valign=top><br>

        <table border=0 cellpadding=0 cellspacing=0 width=100%>
          <tr>
            <td>


<table border=0 cellpadding=0 cellspacing=0>
  <tr><td bgcolor=#000000><img src="../Оболочка/images/raspor.gif" height=2></td>
  <tr><td valign=Center height="30"><span class=h1>Временные задержки. Таймер-счётчик</span></td></tr>
  <tr><td bgcolor=#000000><img src="../Оболочка/images/raspor.gif" height=2></td></tr>
</table><br>

<ul>
  <dt><a class=m href="#tit1">Краткие теоретические сведения</a></dt>
  <dt><a class=m href="#tit2">Задание на лабораторную работу</a></dt>
  <ul>
    <dt><a class=m href="#tit3_1">Пример решения задачи 4.1</a></dt>
    <dt><a class=m href="#tit3_2">Пример решения задачи 4.2</a></dt>
  </ul>
</ul>
<hr width="90%" Color="#7685C6" Align="Right"><Br>

<p class=h3>Цель работы:</p>

<p>изучить основные приёмы, используемые при микропроцессорной реализации алгоритмов формирования временных задержек.</p><br>




<a name="tit1"></a>
<table border=0 cellpadding=0 cellspacing=0 width=97% bgcolor=#ABB3D5>
  <tr><td bgcolor=#000000 ColSpan=2><img src="../Оболочка/images/raspor.gif" height=1></td></tr>
  <tr><td width=30></td><td valign=Center><span class=h>Краткие теоретические сведения</span></td></tr>
  <tr><td bgcolor=#000000 width="25" ColSpan="2"><img src="../Оболочка/images/raspor.gif" height=1></td></tr>
</table>
<br>

<p>Программное управление осуществляется в функции времени и заключается в формировании и выдаче управляющих воздействий в соответствии с заранее
известной таблицей либо циклограммой. Для этого необходимо представить исходную информацию в виде массива и организовать вывод его элементов через
заданные промежутки времени. Отсчёт промежутков времени можно производить как при помощи программных, так и аппаратных средств (таймер).</p>

<p>Программные счётчики позволяют задержать выполнение программы на заданное время и представляют собой группы циклически повторяющихся команд,
время выполнения каждой из которых можно оценить по числу тактов процессора. Идея состоит в том, чтобы загрузить контроллер бессмысленной работой, а
так как время выполнения команд строго привязано к тактовой частоте F<sub>clk</sub>, то зная её легко вычислить время задержки.
При F<sub>clk</sub> = 16МГц, время выполнения команды составит T<sub>clk</sub> = 1/16000000 = 0,0000000625с = 0,0625мкс. Например, программа</p>

<table cellspacing="0" cellpadding="4" border="0">
<tr><td><pre><Code>      nop         ; (1 такт)
      ldi r16, 53 ; загрузка счётчика (1 такт)
M0:   dec r16     ; вычитание 1 (1 такт)
      brne M0     ; переход на M0 по ненулю (2 такта)</Code></pre>
</td>
<td></td>
</tr></table>

<p>выполняется за 1+1+(158 тактов цикл)=160 тактов, что при частоте тактового генератора 16МГц соответствует 0,00001 сек. Время выполнения каждой
команды приводится в документации на микроконтроллер. Для больших задержек используются вложенные циклы с несколькими счётчиками. Тогда на трёх
вложенных циклах можно получить около 1 секунды. Однако более оптимальное решение, – вычитание многобайтного числа с переносом.</p>

<table cellspacing="0" cellpadding="4" border="0">
<tr><td><pre><Code>      ldi r16, LowByte    ; загрузка трёх байт
      ldi r17, MidleByte ; задержки
      ldi r18, HighByte
Loop: subi r16, 1        ; вычитание 1
      sbci r17, 0        ; вычитание только С
      sbci r18, 0        ; вычитание только С
      brcc Loop          ; если нет переноса - переход</Code></pre>
</td>
<td></td>
</tr></table>

<p>В результате, вначале из первого числа вычитается 1, а перенос возникает только когда заканчивается очередной байт. В результате из R16 единица
вычитается на каждой итерации, из R17 на каждой 256 итерации, а из R18 – на каждой 65535 итерации. Всего на трёх таких регистрах можно организовать
задержку на 83886082 тактов, что при тактовой частоте 16МГц соответствует задержке около 5,24с. Аналогично, при использовании большего количества
регистров можно получить и большую задержку, длительность которой будет точнее, т.к. в отличии от вложенных циклов, команда brcc всегда будет
выполняться за 2 такта и лишь в последнем случае за один.</p>

<p>Среда AVR Studio позволяет автоматически рассчитать время выполнения программного фрагмента, для чего необходимо правильно настроить тактовую
частоту МК в процессе отладки в меню Debug &#8594; AVR Simulations Options.</p>

<p>Однако для реализации большей точности и длительных задержек чаще применяют не программные, а аппаратные средства – таймеры.</p>

<p>В AVR таймеры имеют названия Timer0, Timer1, Timer2 и т.д. в зависимости от модели. Timer0 и Timer2 8-битные, Timer1 – 16-битный. Основой таймера
является счётчик TCNT: восьми для Timer0 и Timer2 или шестнадцатибитный для Timer2. При переполнении счётчика аппаратно устанавливается флаг TOV,
который можно сбросить программно. Значение в регистре TCNT выражено в "тиках" таймера, длительность которого зависит от тактовой частоты и настроек
предделителя. Настраиваемый предделитель частоты определяет на сколько будет поделена тактовая частота процессорного ядра Fclk. Длительность тика
таймера является обратной величиной от частоты, полученной в результате деления.</p>

<p>При тактовой частоте F<sub>clk</sub> 16МГц и предделителе PVal на 1024 частота тактирования таймера-счётчика 16000000/1024 = 15625 Гц. Тогда
длительность периода (тика) 1/15625 = 0,000064с.. Минимальная частота, которую способен сгенерировать Timer0 16000000/1024/256 = 61,03515625 Гц.
Максимальный интервал времени, который может сформировать Timer0 - 1/(15625/256) 0,016384с.; Timer1 - 0,000064с. * FFFF = 4,194304c.</p>

<p>Для настройки предделителя используются биты CS00, CS01, CS02 регистра TCCR. Для предделителя 1024 CS00=1, CS01=0, CS02=1.</p>

<center><img src="images/lr4_01_TCCR0.png" alt="Рис. 1. Регистр TCCR0B ATmega328P">
<p class="c">Рис. 1. Регистр TCCR0B ATmega328P</p></center>
<br><br><br><br>



<a name="tit2"></a>
<table border=0 cellpadding=0 cellspacing=0 width=97% bgcolor=#ABB3D5>
  <tr><td bgcolor=#000000 ColSpan=2><img src="../Оболочка/images/raspor.gif" height=1></td></tr>
  <tr><td width=30></td><td valign=Center><span class=h>Задания на лабораторную работу</span></td></tr>
  <tr><td bgcolor=#000000 width="25" ColSpan="2"><img src="../Оболочка/images/raspor.gif" height=1></td></tr>
</table><br>

<p><b>ЗАДАЧА 4.1.</b> Написать программу, обеспечивающую программное управление объектом через линии портов B и D в соответствии с циклограммой,
приведённой в таблице. В зависимости от варианта в качестве объекта выступает линейка из светодиодов, шаговый двигатель, светодиодная матрица,
RGB-светодиод, сервомашинка или звуковой динамик в соответствии со схемами включения, заданными в варианте.</p>

<p>Схема имеет кнопки S1 и S2, которые позволяют выбрать один из режимов работы. Частота микроконтроллера 16МГц. Организовать задержку программным
способом максимально приближенную к заданным значениям. Промоделировать работу схемы в Proteus и оценить погрешность формирования задержки в тактах
и милисекундах.</p>

<div class="post_body" align="left">
<a href='javascript:;'><div class="sp-body" title="<u>Вариант 1</u>" style="display: none;"></a>
<p>Светодиодная линейка.</p>
<table width="1000">
 <tr>
  <td valign="top">
                                            <table border="1" cellpadding="7" cellspacing="0" width="600">
                                                <tr valign="Middle" bgcolor="#D1D6E9">
                                                    <td colspan="2"><p class=tcb>Циклограмма</p></td>
                                                    <td rowspan="2"><p class=tcb>Время переключения при нажатой S1
                                                        (сек)</p></td>
                                                    <td rowspan="2"><p class=tcb>Время переключения при нажатой S2
                                                        (сек)</p></td>
                                                </tr>
                                                <tr>
                                                    <td><p class=tcb>При нажатой S1</p></td>
                                                    <td><p class=tcb>При нажатой S2</p></td>
                                                </tr>
                                                <tr bgcolor=#DCDCDC>
                                                    <td><p class=tc><img src="images/01_S1.gif"></p></td>
                                                    <td><p class=tc><img src="images/15_S2.gif"></p></td>
                                                    <td><p class=tc>0,05</p></td>
                                                    <td><p class=tc>1</p></td>
                                                </tr>
                                            </table>
                                        </td>

                                        <td align="center">
                                            <a class="images" href="images/lr4_01.png" title="Вариант 1"><img
                                                    src="images/lr4_01.png" width="300"></a>
                                            <p class=tc>Схема включения светодиодной линейки<br><a
                                                    href="projects/laba 4_1_1.pdsprj">Скачать Proteus-модель</a></p>
                                        </td>
                                    </tr>
                                </table>

                                <br>
                                <hr width="90%" color="#7685C6" align="right">
                                <br><br>
                            </div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 2</u>" style='display: none'>
    </a>
    <p>Шаговый двигатель.</p>
    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="0" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="2"><p class=tcb>Циклограмма</p></td>
                        <td rowspan="2"><p class=tcb>Длительность одного шага при нажатой S1 (сек)</p></td>
                        <td rowspan="2"><p class=tcb>Длительность одного шага при нажатой S2 (сек)</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc>Ротор двигателя вращается 3 секунды вперёд.</p></td>
                        <td><p class=tc>Ротор двигателя вращается 6 секунд назад.</p></td>
                        <td><p class=tc>0,2</p></td>
                        <td><p class=tc>0,8</p></td>
                    </tr>
                </table>
            </td>

            <td align="center">
                <a class="images" href="images/lr4_02.png" title="Вариант 2"><img src="images/lr4_02.png"
                                                                                  width="300"></a>
                <p class=tc>Схема включения шагового двигателя<br><a href="projects/laba 4_1_2.pdsprj">Скачать
                    Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 3</u>" style='display: none'>
    </a>
    <p>Светодиодная матрица.</p>
    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="1" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="2"><p class=tcb>Циклограмма</p></td>
                        <td rowspan="2"><p class=tcb>Время отображения символа при нажатой S1 (сек)</p></td>
                        <td rowspan="2"><p class=tcb>Время отображения символа при нажатой S2 (сек)</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc>На матрице поочерёдно отображаются буквы вашего имени</p></td>
                        <td><p class=tc>На матрице отображаются буквы вашего имени в обратной последовательности</p>
                        </td>
                        <td><p class=tc>0,35</p></td>
                        <td><p class=tc>1,3</p></td>
                    </tr>
                </table>
            </td>

            <td align="center">
                <a class="images" href="images/lr4_03.png" title="Вариант 3"><img src="images/lr4_03.png"
                                                                                  width="300"></a>
                <p class=tc>Схема включения светодиодной матрицы<br><a href="projects/laba 4_1_3.pdsprj">Скачать
                    Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 4</u>" style='display: none'>
    </a>
    <p>Звуковой динамик.</p>
    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="1" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="2"><p class=tcb>Циклограмма</p></td>
                        <td rowspan="2"><p class=tcb>Периодичность звуковых сигналов при нажатой S1 (сек)</p></td>
                        <td rowspan="2"><p class=tcb>Периодичность звуковых сигналов при нажатой S2 (сек)</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc>Периодически выдаются звуковые сигналы частотой 1300Гц.</p></td>
                        <td><p class=tc>Периодически выдаются звуковые сигналы частотой 500Гц.</p></td>
                        <td><p class=tc>0,7</p></td>
                        <td><p class=tc>1,4</p></td>
                    </tr>
                </table>
                <p>Длительность "1" равна длительности "0".</p></td>
            <td align="center">
                <a class="images" href="images/lr4_04.png" title="Вариант 4"><img src="images/lr4_04.png" width="300"></a>
                <p class=tc>Схема включения звукового динамика<br><a href="projects/laba 4_1_4.pdsprj">Скачать
                    Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
  <a href='javascript:;'><div class="sp-body" title="<u>Вариант 5</u>" style='display: none'></a>
    <p>Светофор.</p>
    <p>Светофор представляет собой светотехническое устройство, предназначенное для последовательного включения на
        заданное время определенных сигналов. Элементая база светофора для участников дорожного движения состоит из
        красного (кр.1), жёлтого (ж.) и зелёного (зел.1) цветов, светофора для пешеходов - из красного (кр.2) и зелёного
        (зел.2) цветов. Также, светофор оборудован динамиком, издающим сигнал определённой частоты, предназначенный для
        оповещения пешеходов, имеющих проблемы со зрением. Элементная база светофора представлена на рис. Х:
        <center><img src="images/traffic.png" alt="Световые элементы светофора для автомобилистов и пешеходов."><p class="c">Рис. X. Элементы светофора</p></center>

		<table width="1000">
      <tr><td valign="top"><table border="0" cellpadding="7" cellspacing="1" width="600">
       <tr valign="Middle">
        <td><p>При нажатой S1 светофор работает в дневном режиме. Циклограмма работы светофора:</p>
		<center><img src="images/cycleS1.png" alt="Циклограмма работы светофора S1"><p class="c">Рис. X. Циклограмма работы светофора при S1</p></center>
		</td>
       <tr valign="Middle">
        <td><p>При нажатой S2 светофор работает в режиме ночного времени, когда мигает только жёлтый цвет. Циклограмма работы светофора:</p>
		<center><img src="images/cyclogramS21.png" alt="Циклограмма работы светофора S2"><p class="c">Рис. Х. Циклограмма работы светофора при S2</p></center>
		</td>
	   </tr>
      </table>
    </td>

   <td align="center">
    <a class="images" href="images/lr4_09.png" title="Вариант 5"><img src="images/lr4_09.png" width="300"></a>
    <p class=tc>Схема включения элементов светофора.<br><a href="projects/laba 4_1_5.pdsprj">Скачать Proteus-модель</a></p>
   </td>
  </tr>
 </table>
 <br><hr width="90%" color="#7685C6" align="right"><br><br>
</div>
</div>

<div class="post_body">
  <a href='javascript:;'><div class="sp-body" title="<u>Вариант 6</u>" style='display: none'></a>
    <p>RGB-светодиод.</p>
    <p>Период следования импульсов по каждому из трёх каналов управления красным (R), зелёным (G) и синим (B) цветами 2мс.</p>

    <table width="1000">
     <tr><td valign="top"><table border="1" cellpadding="7" cellspacing="1" width="600">
       <tr valign="Middle" bgcolor="#D1D6E9">
        <td colspan="3"><p class=tcb>Длительность импульсов при нажатой S1, мс</p></td>
        <td colspan="3"><p class=tcb>Длительность импульсов при нажатой S2, мс</p></td>
       </tr>
       <tr bgcolor=#DCDCDC>
	    <td><p class='tc'>R: 1,6</p></td><td><p class='tc'>G: 1,2</p></td><td><p class='tc'>B: 0,4</p></td>
		<td><p class='tc'>R: 0,4</p></td><td><p class='tc'>G: 0,8</p></td><td><p class='tc'>B: 1,6</p></td>
       </tr>
       <tr bgcolor=#D1D6E9>
        <td colspan="3"><div class="rgb_block orange"></div></td>
        <td colspan="3"><div class="rgb_block blue"></div></td>
       </tr>
     </table>
   </td>

   <td align="center">
    <a class="images" href="images/lr4_07.png" title="Вариант 6"><img src="images/lr4_07.png" width="300"></a>
    <p class=tc>Схема включения RGB-светодиода<br><a href="projects/laba 4_1_6.pdsprj">Скачать Proteus-модель</a></p>
   </td>
  </tr>
 </table>
 <br><hr width="90%" color="#7685C6" align="right"><br><br>
</div>
</div>

<div class="post_body">
  <a href='javascript:;'><div class="sp-body" title="<u>Вариант 7</u>" style='display: none'></a>
    <p>Сервопривод. Обеспечить угол поворота перекладки руля:</p>

    <table width="1000">
      <tr><td valign="top"><table border="1" cellpadding="7" cellspacing="1" width="600">
       <tr valign="Middle" bgcolor="#D1D6E9">
          <td><p class=tcb>При отпущенных S1 и S2<Br> (исходное положение)</p></td>
          <td><p class=tcb>При нажатой S1</p></td>
          <td><p class=tcb>При нажатой S2</p></td>
         </tr>
         <tr bgcolor=#DCDCDC>
          <td><p class=tc>0&deg</p></td>
          <td><p class=tc>+30&deg</p></td>
          <td><p class=tc>-60&deg</p></td>
         </tr>
        </table>
       </td>

   <td align="center">
    <a class="images" href="images/lr4_08.png" title="Вариант 7"><img src="images/lr4_08.png" width="300"></a>
    <p class=tc>Схема включения сервопривода.<br><a href="projects/laba 4_1_7.pdsprj">Скачать Proteus-модель</a></p>
   </td>
  </tr>
 </table>
 <br><hr width="90%" color="#7685C6" align="right"><br><br>
</div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 8</u>" style='display: none'>
    </a>
    <p>Светодиодная линейка.</p>
    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="1" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="2"><p class=tcb>Циклограмма</p></td>
                        <td rowspan="2"><p class=tcb>Время переключения при нажатой S1 (сек)</p></td>
                        <td rowspan="2"><p class=tcb>Время переключения при нажатой S2 (сек)</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc><img src="images/02_S1.gif"></p></td>
                        <td><p class=tc><img src="images/14_S2.gif"></p></td>
                        <td><p class=tc>0,1</p></td>
                        <td><p class=tc>1,05</p></td>
                    </tr>
                </table>
            </td>

            <td align="center">
                <a class="images" href="images/lr4_01.png" title="Вариант 8"><img src="images/lr4_01.png"
                                                                                  width="300"></a>
                <p class=tc>Схема включения светодиодной линейки<br><a href="projects/laba 4_1_1.pdsprj">Скачать
                    Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 9</u>" style='display: none'>
    </a>
    <p>Шаговый двигатель.</p>
    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="1" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="2"><p class=tcb>Циклограмма</p></td>
                        <td rowspan="2"><p class=tcb>Длительность одного шага при нажатой S1 (сек)</p></td>
                        <td rowspan="2"><p class=tcb>Длительность одного шага при нажатой S2 (сек)</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc>Ротор двигателя делает 20 шагов вперёд.</p></td>
                        <td><p class=tc>Ротор двигателя делает 15 шагов назад.</p></td>
                        <td><p class=tc>0,3</p></td>
                        <td><p class=tc>0,7</p></td>
                    </tr>
                </table>
            </td>

            <td align="center">
                <a class="images" href="images/lr4_02.png" title="Вариант 9"><img src="images/lr4_02.png"
                                                                                  width="300"></a>
                <p class=tc>Схема включения шагового двигателя<br><a href="projects/laba 4_1_2.pdsprj">Скачать
                    Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 10</u>" style='display: none'>
    </a>
    <p>Светодиодная матрица.</p>
    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="1" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="2"><p class=tcb>Циклограмма</p></td>
                        <td rowspan="2"><p class=tcb>Время отображения символа при нажатой S1 (сек)</p></td>
                        <td rowspan="2"><p class=tcb>Время отображения символа при нажатой S2 (сек)</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc>На матрице поочерёдно отображаются буквы вашего имени</p></td>
                        <td><p class=tc>На матрице отображаются буквы вашего имени в обратной последовательности</p>
                        </td>
                        <td><p class=tc>0,4</p></td>
                        <td><p class=tc>1,35</p></td>
                    </tr>
                </table>
            </td>

            <td align="center">
                <a class="images" href="images/lr4_03.png" title="Вариант 10"><img src="images/lr4_03.png"
                                                                                  width="300"></a>
                <p class=tc>Схема включения светодиодной матрицы<br><a href="projects/laba 4_1_3.pdsprj">Скачать
                    Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 11</u>" style='display: none'>
    </a>
    <p>Звуковой динамик.</p>
    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="1" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="2"><p class=tcb>Циклограмма</p></td>
                        <td rowspan="2"><p class=tcb>Периодичность звуковых сигналов при нажатой S1 (сек)</p></td>
                        <td rowspan="2"><p class=tcb>Периодичность звуковых сигналов при нажатой S2 (сек)</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc>Периодически выдаются звуковые сигналы частотой 800Гц.</p></td>
                        <td><p class=tc>Периодически выдаются звуковые сигналы частотой 1500Гц.</p></td>
                        <td><p class=tc>0,45</p></td>
                        <td><p class=tc>1,5</p></td>
                    </tr>
                </table>
                <p>Длительность логической 1 равна длительности логического 0.</p></td>
            <td align="center">
                <a class="images" href="images/lr4_04.png" title="Вариант 11"><img src="images/lr4_04.png"
                                                                                  width="300"></a>
                <p class=tc>Схема включения звукового динамика<br><a href="projects/laba 4_1_4.pdsprj">Скачать
                    Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
  <a href='javascript:;'><div class="sp-body" title="<u>Вариант 12</u>" style='display: none'></a>
    <p>RGB-светодиод.</p>
    <p>Период следования импульсов по каждому из трёх каналов управления красным (R), зелёным (G) и синим (B) цветами 2мс.</p>

    <table width="1000">
     <tr><td valign="top"><table border="1" cellpadding="7" cellspacing="1" width="600">
       <tr valign="Middle" bgcolor="#D1D6E9">
        <td colspan="3"><p class=tcb>Длительность импульсов при нажатой S1, мс</p></td>
        <td colspan="3"><p class=tcb>Длительность импульсов при нажатой S2, мс</p></td>
       </tr>
       <tr bgcolor=#DCDCDC>
	    <td><p class='tc'>R: 0,4</p></td><td><p class='tc'>G: 1,2</p></td><td><p class='tc'>B: 0,4</p></td>
		<td><p class='tc'>R: 1,6</p></td><td><p class='tc'>G: 0,8</p></td><td><p class='tc'>B: 1,6</p></td>
       </tr>
       <tr bgcolor=#D1D6E9>
        <td colspan="3"><div class="rgb_block green"></div></td>
        <td colspan="3"><div class="rgb_block pink"></div></td>
       </tr>
     </table>
   </td>

   <td align="center">
    <a class="images" href="images/lr4_07.png" title="Вариант 12"><img src="images/lr4_07.png" width="300"></a>
    <p class=tc>Схема включения RGB-светодиода<br><a href="projects/laba 4_1_6.pdsprj">Скачать Proteus-модель</a></p>
   </td>
  </tr>
 </table>
 <br><hr width="90%" color="#7685C6" align="right"><br><br>
</div>
</div>

<div class="post_body">
  <a href='javascript:;'><div class="sp-body" title="<u>Вариант 13</u>" style='display: none'></a>
    <p>Сервопривод. Обеспечить угол поворота перекладки руля:</p>

    <table width="1000">
      <tr><td valign="top"><table border="1" cellpadding="7" cellspacing="1" width="600">
       <tr valign="Middle" bgcolor="#D1D6E9">
          <td><p class=tcb>При отпущенных S1 и S2<Br> (исходное положение)</p></td>
          <td><p class=tcb>При нажатой S1</p></td>
          <td><p class=tcb>При нажатой S2</p></td>
         </tr>
         <tr bgcolor=#DCDCDC>
          <td><p class=tc>+90&deg</p></td>
          <td><p class=tc>+15&deg</p></td>
          <td><p class=tc>-45&deg</p></td>
         </tr>
        </table>
       </td>

   <td align="center">
    <a class="images" href="images/lr4_08.png" title="Вариант 13"><img src="images/lr4_08.png" width="300"></a>
    <p class=tc>Схема включения сервопривода.<br><a href="projects/laba 4_1_7.pdsprj">Скачать Proteus-модель</a></p>
   </td>
  </tr>
 </table>
 <br><hr width="90%" color="#7685C6" align="right"><br><br>
</div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 14</u>" style='display: none'>
    </a>
    <p>Светодиодная линейка.</p>
    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="1" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="2"><p class=tcb>Циклограмма</p></td>
                        <td rowspan="2"><p class=tcb>Время переключения при нажатой S1 (сек)</p></td>
                        <td rowspan="2"><p class=tcb>Время переключения при нажатой S2 (сек)</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc><img src="images/03_S1.gif"></p></td>
                        <td><p class=tc><img src="images/13_S2.gif"></p></td>
                        <td><p class=tc>0,15</p></td>
                        <td><p class=tc>1,1</p></td>
                    </tr>
                </table>
            </td>
            <td align="center">
                <a class="images" href="images/lr4_01.png" title="Вариант 14"><img src="images/lr4_01.png" width="300"></a>
                <p class=tc>Схема включения светодиодной линейки<br><a href="projects/laba 4_1_1.pdsprj">Скачать
                    Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 15</u>" style='display: none'>
    </a>
    <p>Шаговый двигатель.</p>
    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="1" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="2"><p class=tcb>Циклограмма</p></td>
                        <td rowspan="2"><p class=tcb>Длительность одного шага при нажатой S1 (сек)</p></td>
                        <td rowspan="2"><p class=tcb>Длительность одного шага при нажатой S2 (сек)</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc>Ротор двигателя делает 18 шагов против часовой стрелки и 9 по часовой
                            стрелке.</p></td>
                        <td><p class=tc>Ротор двигателя делает 24 шага по часовой стрелке и 12 против часовой
                            стрелки.</p></td>
                        <td><p class=tc>0,3</p></td>
                        <td><p class=tc>0,15</p></td>
                    </tr>
                </table>
            </td>

            <td align="center">
                <a class="images" href="images/lr4_02.png" title="Вариант 15"><img src="images/lr4_02.png" width="300"></a>
                <p class=tc>Схема включения шагового двигателя<br><a href="projects/laba 4_1_2.pdsprj">Скачать
                    Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 16</u>" style='display: none'>
    </a>
    <p>Светодиодная матрица.</p>
    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="1" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="2"><p class=tcb>Циклограмма</p></td>
                        <td rowspan="2"><p class=tcb>Время отображения символа при нажатой S1 (сек)</p></td>
                        <td rowspan="2"><p class=tcb>Время отображения символа при нажатой S2 (сек)</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc>На матрице поочерёдно отображаются буквы вашего имени</p></td>
                        <td><p class=tc>На матрице отображаются буквы вашего имени в обратной последовательности</p>
                        </td>
                        <td><p class=tc>0,45</p></td>
                        <td><p class=tc>1,4</p></td>
                    </tr>
                </table>
            </td>

            <td align="center">
                <a class="images" href="images/lr4_03.png" title="Вариант 16"><img src="images/lr4_03.png" width="300"></a>
                <p class=tc>Схема включения светодиодной матрицы<br><a href="projects/laba 4_1_3.pdsprj">Скачать
                    Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 17</u>" style='display: none'>
    </a>
    <p>Звуковой динамик.</p>

    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="1" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="2"><p class=tcb>Циклограмма</p></td>
                        <td rowspan="2"><p class=tcb>Периодичность звуковых сигналов при нажатой S1 (сек)</p></td>
                        <td rowspan="2"><p class=tcb>Периодичность звуковых сигналов при нажатой S2 (сек)</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc>Периодически выдаются звуковые сигналы частотой 100Гц.</p></td>
                        <td><p class=tc>Периодически выдаются звуковые сигналы частотой 2000Гц.</p></td>
                        <td><p class=tc>0,75</p></td>
                        <td><p class=tc>1,1</p></td>
                    </tr>
                </table>
                <p>Длительность логической 1 равна длительности логического 0.</p></td>
            <td align="center">
                <a class="images" href="images/lr4_04.png" title="Вариант 17"><img src="images/lr4_04.png" width="300"></a>
                <p class=tc>Схема включения звукового динамика<br><a href="projects/laba 4_1_4.pdsprj">Скачать
                    Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
  <a href='javascript:;'><div class="sp-body" title="<u>Вариант 18</u>" style='display: none'></a>
    <p>RGB-светодиод.</p>
    <p>Период следования импульсов по каждому из трёх каналов управления красным (R), зелёным (G) и синим (B) цветами 2мс.</p>

    <table width="1000">
     <tr><td valign="top"><table border="1" cellpadding="7" cellspacing="1" width="600">
       <tr valign="Middle" bgcolor="#D1D6E9">
        <td colspan="3"><p class=tcb>Длительность импульсов при нажатой S1, мс</p></td>
        <td colspan="3"><p class=tcb>Длительность импульсов при нажатой S2, мс</p></td>
       </tr>
       <tr bgcolor=#DCDCDC>
	    <td><p class='tc'>R: 0,4</p></td><td><p class='tc'>G: 0,4</p></td><td><p class='tc'>B: 1,6</p></td>
		<td><p class='tc'>R: 1,6</p></td><td><p class='tc'>G: 1,6</p></td><td><p class='tc'>B: 0,4</p></td>
       </tr>
       <tr bgcolor=#D1D6E9>
        <td colspan="3"><div class="rgb_block dark_blue"></div></td>
        <td colspan="3"><div class="rgb_block yellow"></div></td>
       </tr>
     </table>
   </td>

   <td align="center">
    <a class="images" href="images/lr4_07.png" title="Вариант 18"><img src="images/lr4_07.png" width="300"></a>
    <p class=tc>Схема включения RGB-светодиода<br><a href="projects/laba 4_1_6.pdsprj">Скачать Proteus-модель</a></p>
   </td>
  </tr>
 </table>
 <br><hr width="90%" color="#7685C6" align="right"><br><br>
</div>
</div>

<div class="post_body">
  <a href='javascript:;'><div class="sp-body" title="<u>Вариант 19</u>" style='display: none'></a>
    <p>Сервопривод. Обеспечить угол поворота перекладки руля:</p>

    <table width="1000">
      <tr><td valign="top"><table border="1" cellpadding="7" cellspacing="1" width="600">
       <tr valign="Middle" bgcolor="#D1D6E9">
          <td><p class=tcb>При отпущенных S1 и S2<Br> (исходное положение)</p></td>
          <td><p class=tcb>При нажатой S1</p></td>
          <td><p class=tcb>При нажатой S2</p></td>
         </tr>
         <tr bgcolor=#DCDCDC>
          <td><p class=tc>-90&deg</p></td>
          <td><p class=tc>+45&deg</p></td>
          <td><p class=tc>+90&deg</p></td>
         </tr>
        </table>
       </td>

   <td align="center">
    <a class="images" href="images/lr4_08.png" title="Вариант 19"><img src="images/lr4_08.png" width="300"></a>
    <p class=tc>Схема включения сервопривода.<br><a href="projects/laba 4_1_7.pdsprj">Скачать Proteus-модель</a></p>
   </td>
  </tr>
 </table>
 <br><hr width="90%" color="#7685C6" align="right"><br><br>
</div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 20</u>" style="display: none;">
    </a>
    <p>Светодиодная линейка.</p>

    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="1" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="2"><p class=tcb>Циклограмма</p></td>
                        <td rowspan="2"><p class=tcb>Время переключения при нажатой S1 (сек)</p></td>
                        <td rowspan="2"><p class=tcb>Время переключения при нажатой S2 (сек)</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc><img src="images/01_S1.gif"></p></td>
                        <td><p class=tc><img src="images/15_S2.gif"></p></td>
                        <td><p class=tc>0,2</p></td>
                        <td><p class=tc>1,15</p></td>
                    </tr>
                </table>
            </td>
            <td align="center">
                <a class="images" href="images/lr4_01.png" title="Вариант 20"><img src="images/lr4_01.png" width="300"></a>
                <p class=tc>Схема включения светодиодной линейки<br><a href="projects/laba 4_1_1.pdsprj">Скачать
                    Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 21</u>" style='display: none'>
    </a>
    <p>Шаговый двигатель.</p>
    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="1" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="2"><p class=tcb>Циклограмма</p></td>
                        <td rowspan="2"><p class=tcb>Длительность одного шага при нажатой S1 (сек)</p></td>
                        <td rowspan="2"><p class=tcb>Длительность одного шага при нажатой S2 (сек)</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc>Ротор двигателя вращается 4 секунды вперёд.</p></td>
                        <td><p class=tc>Ротор двигателя вращается 7 секунд назад.</p></td>
                        <td><p class=tc>0,3</p></td>
                        <td><p class=tc>0,9</p></td>
                    </tr>
                </table>
            </td>

            <td align="center">
                <a class="images" href="images/lr4_02.png" title="Вариант 21"><img src="images/lr4_02.png" width="300"></a>
                <p class=tc>Схема включения шагового двигателя<br><a href="projects/laba 4_1_2.pdsprj">Скачать
                    Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 22</u>" style='display: none'>
    </a>
    <p>Светодиодная матрица.</p>
    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="1" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="2"><p class=tcb>Циклограмма</p></td>
                        <td rowspan="2"><p class=tcb>Время отображения символа при нажатой S1 (сек)</p></td>
                        <td rowspan="2"><p class=tcb>Время отображения символа при нажатой S2 (сек)</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc>На матрице поочерёдно отображаются буквы вашего имени</p></td>
                        <td><p class=tc>На матрице отображаются буквы вашего имени в обратной последовательности</p>
                        </td>
                        <td><p class=tc>0,5</p></td>
                        <td><p class=tc>1,45</p></td>
                    </tr>
                </table>
            </td>

            <td align="center">
                <a class="images" href="images/lr4_03.png" title="Вариант 22"><img src="images/lr4_03.png" width="300"></a>
                <p class=tc>Схема включения светодиодной матрицы<br><a href="projects/laba 4_1_3.pdsprj">Скачать
                    Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 23</u>" style='display: none'>
    </a>
    <p>Звуковой динамик.</p>
    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="1" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="2"><p class=tcb>Циклограмма</p></td>
                        <td rowspan="2"><p class=tcb>Периодичность звуковых сигналов при нажатой S1 (сек)</p></td>
                        <td rowspan="2"><p class=tcb>Периодичность звуковых сигналов при нажатой S2 (сек)</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc>Периодически выдаются звуковые сигналы частотой 1300Гц.</p></td>
                        <td><p class=tc>Периодически выдаются звуковые сигналы частотой 500Гц.</p></td>
                        <td><p class=tc>0,65</p></td>
                        <td><p class=tc>1,05</p></td>
                    </tr>
                </table>
                <p>Длительность логической 1 равна длительности логического 0.</p></td>
            <td align="center">
                <a class="images" href="images/lr4_04.png" title="Вариант 23"><img src="images/lr4_04.png" width="300"></a>
                <p class=tc>Схема включения звукового динамика<br><a href="projects/laba 4_1_4.pdsprj">Скачать
                    Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
  <a href='javascript:;'><div class="sp-body" title="<u>Вариант 24</u>" style='display: none'></a>
    <p>RGB-светодиод.</p>
    <p>Период следования импульсов по каждому из трёх каналов управления красным (R), зелёным (G) и синим (B) цветами 2мс.</p>

    <table width="1000">
     <tr><td valign="top"><table border="1" cellpadding="7" cellspacing="1" width="600">
       <tr valign="Middle" bgcolor="#D1D6E9">
        <td colspan="3"><p class=tcb>Длительность импульсов при нажатой S1, мс</p></td>
        <td colspan="3"><p class=tcb>Длительность импульсов при нажатой S2, мс</p></td>
       </tr>
       <tr bgcolor=#DCDCDC>
	    <td><p class='tc'>R: 1,6</p></td><td><p class='tc'>G: 0,4</p></td><td><p class='tc'>B: 0,4</p></td>
		<td><p class='tc'>R: 0,4</p></td><td><p class='tc'>G: 1,6</p></td><td><p class='tc'>B: 1,6</p></td>
       </tr>
       <tr bgcolor=#D1D6E9>
        <td colspan="3"><div class="rgb_block red"></div></td>
        <td colspan="3"><div class="rgb_block sky_blue"></div></td>
       </tr>
     </table>
   </td>

   <td align="center">
    <a class="images" href="images/lr4_07.png" title="Вариант 24"><img src="images/lr4_07.png" width="300"></a>
    <p class=tc>Схема включения RGB-светодиода<br><a href="projects/laba 4_1_6.pdsprj">Скачать Proteus-модель</a></p>
   </td>
  </tr>
 </table>
 <br><hr width="90%" color="#7685C6" align="right"><br><br>
</div>
</div>

<div class="post_body">
  <a href='javascript:;'><div class="sp-body" title="<u>Вариант 25</u>" style='display: none'></a>
    <p>Сервопривод. Обеспечить угол поворота перекладки руля:</p>

    <table width="1000">
      <tr><td valign="top"><table border="1" cellpadding="7" cellspacing="1" width="600">
       <tr valign="Middle" bgcolor="#D1D6E9">
          <td><p class=tcb>При отпущенных S1 и S2<Br> (исходное положение)</p></td>
          <td><p class=tcb>При нажатой S1</p></td>
          <td><p class=tcb>При нажатой S2</p></td>
         </tr>
         <tr bgcolor=#DCDCDC>
          <td><p class=tc>-90&deg</p></td>
          <td><p class=tc>0&deg</p></td>
          <td><p class=tc>-30&deg</p></td>
         </tr>
        </table>
       </td>

   <td align="center">
    <a class="images" href="images/lr4_08.png" title="Вариант 25"><img src="images/lr4_08.png" width="300"></a>
    <p class=tc>Схема включения сервопривода.<br><a href="projects/laba 4_1_7.pdsprj">Скачать Proteus-модель</a></p>
   </td>
  </tr>
 </table>
 <br><hr width="90%" color="#7685C6" align="right"><br><br>
</div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 25</u>" style='display: none'>
    </a>
    <p>Сервомашинка.</p>
    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="1" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="3"><p class=tcb>Угол поворота вала</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При отпущенных S1 и S2</p></td>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc>-90&deg</p></td>
                        <td><p class=tc>0&deg</p></td>
                        <td><p class=tc>-30&deg</p></td>
                    </tr>
                </table>
            </td>

            <td align="center">
                <a class="images" href="images/lr4_08.png" title="Вариант 25"><img src="images/lr4_08.png"
                                                                                   width="300"></a>
                <p class=tc>Схема включения сервопривода.<br><a href="projects/laba 4_1_7.pdsprj">Скачать Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 26</u>" style="display: none;">
    </a>
    <p>Светодиодная линейка.</p>
    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="1" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="2"><p class=tcb>Циклограмма</p></td>
                        <td rowspan="2"><p class=tcb>Время переключения при нажатой S1 (сек)</p></td>
                        <td rowspan="2"><p class=tcb>Время переключения при нажатой S2 (сек)</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc><img src="images/01_S1.gif"></p></td>
                        <td><p class=tc><img src="images/15_S2.gif"></p></td>
                        <td><p class=tc>0,25</p></td>
                        <td><p class=tc>1,2</p></td>
                    </tr>
                </table>
            </td>
            <td align="center">
                <a class="images" href="images/lr4_01.png" title="Вариант 26"><img src="images/lr4_01.png" width="300"></a>
                <p class=tc>Схема включения светодиодной линейки<br><a href="projects/laba 4_1_1.pdsprj">Скачать
                    Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 27</u>" style='display: none'>
    </a>
    <p>Шаговый двигатель.</p>
    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="1" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="2"><p class=tcb>Циклограмма</p></td>
                        <td rowspan="2"><p class=tcb>Длительность одного шага при нажатой S1 (сек)</p></td>
                        <td rowspan="2"><p class=tcb>Длительность одного шага при нажатой S2 (сек)</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc>Ротор двигателя делает 25 шагов вперёд.</p></td>
                        <td><p class=tc>Ротор двигателя делает 20 шагов назад.</p></td>
                        <td><p class=tc>0,4</p></td>
                        <td><p class=tc>0,8</p></td>
                    </tr>
                </table>
            </td>

            <td align="center">
                <a class="images" href="images/lr4_02.png" title="Вариант 27"><img src="images/lr4_02.png" width="300"></a>
                <p class=tc>Схема включения шагового двигателя<br><a href="projects/laba 4_1_2.pdsprj">Скачать
                    Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 28</u>" style='display: none'>
    </a>
    <p>Светодиодная матрица.</p>
    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="1" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="2"><p class=tcb>Циклограмма</p></td>
                        <td rowspan="2"><p class=tcb>Время отображения символа при нажатой S1 (сек)</p></td>
                        <td rowspan="2"><p class=tcb>Время отображения символа при нажатой S2 (сек)</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc>На матрице поочерёдно отображаются буквы вашего имени</p></td>
                        <td><p class=tc>На матрице отображаются буквы вашего имени в обратной последовательности</p>
                        </td>
                        <td><p class=tc>0,55</p></td>
                        <td><p class=tc>1,5</p></td>
                    </tr>
                </table>
            </td>

            <td align="center">
                <a class="images" href="images/lr4_03.png" title="Вариант 28"><img src="images/lr4_03.png" width="300"></a>
                <p class=tc>Схема включения светодиодной матрицы<br><a href="projects/laba 4_1_3.pdsprj">Скачать
                    Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
    <a href='javascript:;'>
        <div class="sp-body" title="<u>Вариант 29</u>" style='display: none'>
    </a>
    <p>Звуковой динамик.</p>
    <table width="1000">
        <tr>
            <td valign="top">
                <table border="1" cellpadding="7" cellspacing="1" width="600">
                    <tr valign="Middle" bgcolor="#D1D6E9">
                        <td colspan="2"><p class=tcb>Циклограмма</p></td>
                        <td rowspan="2"><p class=tcb>Периодичность звуковых сигналов при нажатой S1 (сек)</p></td>
                        <td rowspan="2"><p class=tcb>Периодичность звуковых сигналов при нажатой S2 (сек)</p></td>
                    </tr>
                    <tr>
                        <td><p class=tcb>При нажатой S1</p></td>
                        <td><p class=tcb>При нажатой S2</p></td>
                    </tr>
                    <tr bgcolor=#DCDCDC>
                        <td><p class=tc>Периодически выдаются звуковые сигналы частотой 800Гц.</p></td>
                        <td><p class=tc>Периодически выдаются звуковые сигналы частотой 1500Гц.</p></td>
                        <td><p class=tc>0,55</p></td>
                        <td><p class=tc>1,25</p></td>
                    </tr>
                </table>
                <p>Длительность логической 1 равна длительности логического 0.</p></td>
            <td align="center">
                <a class="images" href="images/lr4_04.png" title="Вариант 29"><img src="images/lr4_04.png" width="300"></a>
                <p class=tc>Схема включения звукового динамика<br><a href="projects/laba 4_1_4.pdsprj">Скачать
                    Proteus-модель</a></p>
            </td>
        </tr>
    </table>
    <br>
    <hr width="90%" color="#7685C6" align="right">
    <br><br>
</div>
</div>

<div class="post_body">
  <a href='javascript:;'><div class="sp-body" title="<u>Вариант 30</u>" style='display: none'></a>
    <p>RGB-светодиод.</p>
    <p>Период следования импульсов по каждому из трёх каналов управления красным (R), зелёным (G) и синим (B) цветами 2мс.</p>

    <table width="1000">
     <tr><td valign="top"><table border="1" cellpadding="7" cellspacing="1" width="600">
       <tr valign="Middle" bgcolor="#D1D6E9">
        <td colspan="3"><p class=tcb>Длительность импульсов при нажатой S1, мс</p></td>
        <td colspan="3"><p class=tcb>Длительность импульсов при нажатой S2, мс</p></td>
       </tr>
       <tr bgcolor=#DCDCDC>
        <td><p class='tc'>R: 1,2</p></td><td><p class='tc'>G: 0,4</p></td><td><p class='tc'>B: 1,6</p></td>
		<td><p class='tc'>R: 0,8</p></td><td><p class='tc'>G: 1,6</p></td><td><p class='tc'>B: 0,4</p></td>
       </tr>
       <tr bgcolor=#D1D6E9>
	    <td colspan="3"><div class="rgb_block purple"></div></td>
        <td colspan="3"><div class="rgb_block light_green"></div></td>
       </tr>
     </table>
   </td>

   <td align="center">
    <a class="images" href="images/lr4_07.png" title="Вариант 30"><img src="images/lr4_07.png" width="300"></a>
    <p class=tc>Схема включения RGB-светодиода<br><a href="projects/laba 4_1_6.pdsprj">Скачать Proteus-модель</a></p>
   </td>
  </tr>
 </table>
 <br><hr width="90%" color="#7685C6" align="right"><br><br>
</div>
</div>

<div class="post_body">
  <a href='javascript:;'><div class="sp-body" title="<u>Вариант 31</u>" style='display: none'></a>
    <p>Сервопривод. Обеспечить угол поворота перекладки руля:</p>

    <table width="1000">
      <tr><td valign="top"><table border="1" cellpadding="7" cellspacing="1" width="600">
       <tr valign="Middle" bgcolor="#D1D6E9">
          <td><p class=tcb>При отпущенных S1 и S2<Br> (исходное положение)</p></td>
          <td><p class=tcb>При нажатой S1</p></td>
          <td><p class=tcb>При нажатой S2</p></td>
         </tr>
         <tr bgcolor=#DCDCDC>
          <td><p class=tc>+90&deg</p></td>
          <td><p class=tc>-75&deg</p></td>
          <td><p class=tc>+30&deg</p></td>
         </tr>
        </table>
       </td>

   <td align="center">
    <a class="images" href="images/lr4_08.png" title="Вариант 31"><img src="images/lr4_08.png" width="300"></a>
    <p class=tc>Схема включения сервопривода.<br><a href="projects/laba 4_1_7.pdsprj">Скачать Proteus-модель</a></p>
   </td>
  </tr>
 </table>
 <br><hr width="90%" color="#7685C6" align="right"><br><br>
</div>
</div>
<br>

<p><b>ЗАДАЧА 4.2.</b> Выполнить задачу 4.1 с использованием таймера TIMER0 и механизма прерываний. Величина задержки должна быть максимально
приближена к заданному значению. Промоделировать работу схемы в Proteus. Оценить погрешность формирования задержки в тактах и милисекундах.
</p>
<p>Выберите вариант из выпадающего списка:</p>

<center><table>
 <tr>
  <form name="myForm"><select name="variants">
   <option value="Режим таймера: NORMAL;" selected="selected">1 вариант</option>
   <option value="Режим таймера: CTC;">2 вариант</option>
   <option value="Режим таймера: NORMAL;">3 вариант</option>
   <option value="Режим таймера: CTC;">4 вариант</option>
   <option value="Режим таймера: NORMAL;">5 вариант</option>
   <option value="Режим таймера: CTC;">6 вариант</option>
   <option value="Режим таймера: NORMAL;">7 вариант</option>
   <option value="Режим таймера: CTC;">8 вариант</option>
   <option value="Режим таймера: NORMAL;">9 вариант</option>
   <option value="Режим таймера: CTC;">10 вариант</option>
   <option value="Режим таймера: NORMAL;">11 вариант</option>
   <option value="Режим таймера: CTC;">12 вариант</option>
   <option value="Режим таймера: NORMAL;">13 вариант</option>
   <option value="Режим таймера: CTC;">14 вариант</option>
   <option value="Режим таймера: NORMAL;">15 вариант</option>
   <option value="Режим таймера: CTC;">16 вариант</option>
   <option value="Режим таймера: NORMAL;">17 вариант</option>
   <option value="Режим таймера: CTC;">18 вариант</option>
   <option value="Режим таймера: NORMAL;">19 вариант</option>
   <option value="Режим таймера: CTC;">20 вариант</option>
   <option value="Режим таймера: NORMAL;">21 вариант</option>
   <option value="Режим таймера: CTC;">22 вариант</option>
   <option value="Режим таймера: NORMAL;">23 вариант</option>
   <option value="Режим таймера: CTC;">24 вариант</option>
   <option value="Режим таймера: NORMAL;">25 вариант</option>
   <option value="Режим таймера: CTC;">26 вариант</option>
   <option value="Режим таймера: NORMAL;">27 вариант</option>
   <option value="Режим таймера: CTC;">28 вариант</option>
   <option value="Режим таймера: NORMAL;">29 вариант</option>
   <option value="Режим таймера: CTC;">30 вариант</option>
  </select></form>
 </tr>
 <tr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tr>
 <tr>
  <div class="script1" id="selection">Режим таймера: NORMAL;</div>
 </tr>
</table></center>
<script>
    var variantsSelect = myForm.variants;
    variantsSelect.addEventListener("change", changeOption);

    function changeOption() {
        var selection = document.getElementById("selection");
        var selectedOption = variantsSelect.options[variantsSelect.selectedIndex];
        selection.textContent = selectedOption.value;
    }
</script><br>

<hr width="90%" Color="#7685C6" Align="Right">
<br><br><br><br><br>


<a name="tit4_1"></a>
<table border=0 cellpadding=0 cellspacing=0 width=97% bgcolor=#ABB3D5>
    <tr>
        <td bgcolor=#000000 colspan=2><img src=../Оболочка/images/raspor.gif height=1></td>
    </tr>
    <tr>
        <td width=30></td>
        <td valign=center><span class=h>Пример решения задачи 4.1.</span></td>
    </tr>
    <tr>
        <td bgcolor=#000000 width="25" colspan="2"><img src=../Оболочка/images/raspor.gif height=1></td>
    </tr>
</table>
<br>

<p><b>Управление линейкой светодиодов.</b> Напишем программу периодического включения/ выключения светодиода,
    подключенного к линии 0 порта B. Время
    включения равно времени выключения, и составляет 0,5с. Частота микроконтроллера 16МГц. Организовать задержку
    программным способом.</p>

<p>Вычислим количество тактов, необходимое для задержки на 0.5с. При тактовой частоте 16МГц за 1с МК выполнит 16 000 000
    тактов, при этом время
    одного такта составит 1/16000000с=62,5нс. Значит, для формирования задержки в 0.5с потребуется 8 000 000 тактов.
    Программную задержку организуем в
    цикле Delay, который будет состоять из 3-х вложенных циклов со счётчиками в R19, R20, R21. Учитывая, что условный
    переход <code><span class="class1">brcc</span></code>
    выполняется за 1 такт, если условие ложно и 2 такта в противном случае, при значениях регистров R19=FE, R20=69<sub>16</sub>
    R21=18<sub>16</sub>,
    задержка в цикле от одного выполнения <code><span class="class1">out PORTB, r17</span></code> до следующего его
    выполнения составит 8 000 001 такт, или 500000,06мкс. Погрешность составляет
    1 такт, или 62,5нс.</p>

<center><img src=images/AVRStudio8.png></center>
<br>

<p>Для увеличения времени задержки необходимо либо увеличить значения регистров R19, R20, R21, либо задействовать дополнительные регистры, а для
уменьшения – наоборот исключить один из циклов, либо уменьшить значения регистров R19, R20, R21.</p>

<table width="470">
    <tr>
        <td><pre><code>.include "m328pdef.inc"

init:
      ldi R16, 0b00000001
      out DDRB, R16  ;настройка на вывод линии 0 порта B

main:
      ldi R19, 0xFE  ;254
      ldi R20, 0x69  ;105
      ldi R21, 0x18  ;24
      eor R17, R16
      out PORTB, R17 ;вывод инверсного состояния на линию 0 порта B

Delay:	             ;сидим в этих циклах 0,5с.
      subi R19,1     ;вычитание 1 из регистра r19
      sbci R20,0     ;вычитание только С
      sbci R21,0     ;вычитание только С
      brcc Delay     ;если не было заёма вернуться к метке Delay
      rjmp main</code></pre>
        </td>
    </tr>
</table>

<p>Модель микроконтроллерной системы Arduino для разработанной программы в среде Proteus выглядит следующим образом:</p>

<center><img src=images/lr4_01x.gif><p class="c">Рис. Х.</p></center><br>

<p>Результат запуска полученной программы на реальном МК с тактовой частотой 16МГц подтверждает корректность проведённых расчётов задержки, однако
следует учесть, что данный метод не является абсолютно точным за счёт необходимости восстановления значений счётчиков, а также команд условного
перехода.</p>

<p>Представленная схема подключения светодиодов в реальном устройстве потребует обязательного наличия резисторов между каждым светодиодом и
земляной линией.</p>

<p>Для подбора временных задержек может быть полезен калькулятор количества итераций циклов. Параметры и результат: шестнадцатиричные числа.</p>
<span>low: </span><input class="calculate_input" id="low" type="text">
<span>middle: </span><input class="calculate_input" id="middle" type="text">
<span>high: </span><input class="calculate_input" id="high" type="text">
<script type="text/javascript">
    function calculate() {
        const low = parseInt(document.getElementById('low').value, 16);
        const middle = parseInt(document.getElementById('middle').value, 16);
        const high = parseInt(document.getElementById('high').value, 16);
        if (isNaN(low) || isNaN(middle) || isNaN(high)) alert('Введите корректный параметр');
        else {
            const result = 5 * (low + 1 + middle * 256 + high * 256 * 256) - 1 + 7;
            document.getElementById('result').value = result;
        }
    }
</script>
<input type="button" onclick="calculate()" value="=">
<input id="result" value="0" type="text">
<br><br>

<table border=0 cellpadding=0 cellspacing=0 Style="FLOAT: right; MARGIN: 0px 0px 0px 0px" width=240>
    <Tbody>
    <tr>
        <td>
            <center><img src=images/lr4_01y.png width=353 height=236 border=0
                         alt="Разрез шагового двигателя с постоянными магнитами"></center>
        </td>
    </tr>
    </Tbody>
</table>

<p><b>Управление шаговым двигателем (ШД).</b> Напишем программу вращения ШД для времени шага 0,5с. Частота
    микроконтроллера 16МГц. Организуем
    задержку программным способом, а хранение управляющих команд в табличном массиве.</p>

<p>Шаговый двигатель – это электромеханическое устройство, которое преобразует электрические импульсы в дискретные
    механические вращения. ШД имеет
    две обмотки, подключенные по четырём линиям: “A”, “B” – первая обмотка, и “C”, “D” – вторая. Шаговый двигатель имеет
    ротор – постоянный магнит,
    который вращается внутри, и статор – четыре катушки, которые являются частью корпуса и не перемещаются.</p>

<p>Чтобы шаговый двигатель вращался, необходимо запитывать обмотки в порядке, указанном в таблице. Если направление
    обхода таблицы выбрать сверху
    вниз по кругу, то двигатель будет вращаться вперёд, если снизу вверх по кругу – двигатель будет вращаться назад:</p>

<p>Таблица 2. Порядок включения обмоток шагового двигателя.</p>
<center>
    <table border="1" cellpadding="7" cellspacing="1">
        <tr valign="Middle" bgcolor="#D1D6E9">
            <td rowspan="2">&nbsp;</td>
            <td colspan=2><p class=tcb>Обмотка 1</p></td>
            <td colspan=2><p class=tcb>Обмотка 2</p></td>
            <td rowspan=6 valign=Middle class=vertical><p class=tc>Вперёд &#8593;</p></td>
            <td rowspan=6 valign=Middle class=vertical><p class=tc>Назад &#8595;</p></td>
        </tr>
        <tr>
            <td><p class=tcb>A</p></td>
            <td><p class=tcb>B</p></td>
            <td><p class=tcb>C</p></td>
            <td><p class=tcb>D</p></td>
        </tr>
        <tr bgcolor=#DCDCDC>
            <td><p class=tc>Комбинация 1</p></td>
            <td><p class=tc>1</p></td>
            <td><p class=tc>0</p></td>
            <td colspan=2><p class=tc>отключено</p></td>
        </tr>
        <tr bgcolor=#EAEAEA>
            <td><p class=tc>Комбинация 2</p></td>
            <td colspan=2><p class=tc>отключено</p></td>
            <td><p class=tc>1</p></td>
            <td><p class=tc>0</p></td>
        </tr>
        <tr bgcolor=#DCDCDC>
            <td><p class=tc>Комбинация 3</p></td>
            <td><p class=tc>0</p></td>
            <td><p class=tc>1</p></td>
            <td colspan=2><p class=tc>отключено</p></td>
        </tr>
        <tr bgcolor=#EAEAEA>
            <td><p class=tc>Комбинация 4</p></td>
            <td colspan=2><p class=tc>отключено</p></td>
            <td><p class=tc>0</p></td>
            <td><p class=tc>1</p></td>
        </tr>
    </table>
</center>
<br>

<p>Таким образом, полный оборот ротора ШД делает за четыре шага. Задержка в цикле от одного выполнения <code><span class="class1">out PORTB,
R19</span></code>до следующего его выполнения составит 8 000 001 такт, или 500000,06мкс. Погрешность составляет 1 такт, или 62,5нс. Программная
реализация такого алгоритма может иметь следующий вид:</p>

<table width="470">
    <tr>
        <td><pre><code>.include "m328pdef.inc"
.def flag=R16

init:
      ldi R19,0x3F    ;настройка на вывод
      out DDRB,R19    ;настройка на вывод линий 0..5 портаа B
      ldi zh,HIGH(array*2)
main:
      ldi zl,LOW(array*2)
      ldi flag,0x04   ;счётчик на 4 комбинации ШД

loop:
      lpm R19,z+      ;взять из памяти программ число<
      out PORTB, R19
      rcall Delay     ;вызов подпрограммы задержки
      dec flag        ;уменьшить счётчик на 1
      brne loop       ;если Z = 0 переход на loop
      rjmp main       ;делаем следующий оборот

Delay:
      ldi R19, 0xFC   ;252
      ldi R20, 0x69   ;105
      ldi R21, 0x18   ;24
m1: 	              ;сидим в этих циклах 0,5с.
      subi R19 ,1     ;вычитание 1 из регистра r19
      sbci R20,0      ;вычитание только С
      sbci R21 ,0     ;вычитание только С
      brcc m1         ;если не было заёма вернуться к метке Delay
      ret

array: .db 0b00100100, 0b00001010, 0b00010100, 0b00000011
</code></pre>
        </td>
    </tr>
</table>

<p>Модель микроконтроллерной системы Arduino для разработанной программы в среде Proteus выглядит следующим образом:</p>

<center>
    <img src="images/lr4_04_4.gif" alt="Рис. X.">
    <p class="c">Рис. X. Выполнение тестового примера с ШД</p>
</center>
<br>

<p><b>Управление матрицей светодиодов 8×8.</b> Управление светодиодной матрицей основано на инерционности восприятия изображения глазом, и сводится
ко включению определённых светодиодов в каждой строке матрицы и достаточно быстрому перебору всех строк. Чтобы глаз не замечал смену “кадров”
переключение всех строк должно совершаться как минимум 24 раза в секунду. Это значение принято стандартным в киноиндустрии. Для простоты расчётов
примём, что в секунду должно отобразиться 25 кадров. Каждый кадр – это квадратный массив из 8x8 светодиодов. Тогда строки должны отображаться со
скоростью 25×8=200 раз в секунду. Учитывая, что AVR ядро выполняет 16 миллионов тактов в секунду, на отображение строки отводится 80000 тактов.
Организуем задержку программным способом, а хранение управляющих команд в табличном массиве. Выборку строк будем производить по их номеру через
дешифратор, что сократит количество требуемых линий порта с восьми до трёх.</p>

<table width="470">
    <tr>
        <td><pre><code>.include "m328pdef.inc"

init:
      ldi R16, 0b00111111
      out DDRB, R16         ;настройка на вывод линий порта B
      ldi R16, 0b11110011
      out DDRD, R16         ;настройка на вывод линий порта D

main:
      ldi zl, LOW(array*2)
      ldi zh, HIGH(array*2)
      ldi R17, 8            ;счётчик строк матрицы

M1:
      ldi R19, 0x1C  ;28
      ldi R20, 0x4E  ;78
      lpm R16,z+
      out PORTB, R16        ;вывод в порт B
      lpm R16,z+
      out PORTD, R16        ;вывод в порт D

Delay:                      ;сидим в этих циклах 0,005с. - операции вывода
      subi R19, 1           ;вычитание 1 из регистра r19
      sbci R20,0            ;вычитание только С
      brcc Delay            ;если не было заёма вернуться к метке Delay
      dec  R17              ;уменьшить счётчик цикла
      brne M1               ;цикл из 8 итераций завершён?
      rjmp main

array: .db 0x02,0x00,0x05,0x00,0x08,0x80,0x0C,0x40,0x10,0x20,0x14,0x10,0x18,0x02,0x1C,0x01
</code></pre>
        </td>
    </tr>
</table>

<p>Модель микроконтроллерной системы Arduino для разработанной программы в среде Proteus выглядит следующим образом:</p>

<center><img src=images/8x8.gif alt="Рис. X."><p class="c">Рис. X. Выполнение тестового примера с LED-матрицей 8×8</p></center>
<br>

<p><b>Управление RGB светодиодом.</b> Напишем программу для отображения RGB-светодиодом фиолетового цвета. Период следования импульсов 2мс,
длительность импульсов – 1мс. Частота микроконтроллера 16МГц. Организуем задержку программным способом.</p>

<p>RGB-светодиод – это три светодиода красного (Red), зелёного (Green) и синего (Blue) цвета свечения, совмещённые в одном корпусе. Эти три цвета
являются базовыми, и на их смешении формируется любой цвет. Яркостью каждого светодиода можно управлять, изменяя длительность импульсов и пауз тока,
проходящего через соответствующий светодиод. К примеру, для получения фиолетового цвета нужно смешать в одинаковой пропорции красный и синий цвета,
т.е. длительность импульсов и пауз красного и синего цвета должна быть одинаковой. При этом циклограмма его работы будет иметь вид:</p>

<center><img src="images/lr4_04_5.png" alt="Рис. X." style="display: inline-block; margin: 55px 0;">
    <table border="1" style="display: inline-block; margin: 0 20px; text-align: center;" width="450">
        <tr>
            <td colspan="4" width="225" >S1</td>
            <td colspan="4" width="225" >S2</td>
            
        </tr>
        <tr>
            <td>R, мс</td>
            <td>G, мс</td>
            <td>B, мс</td>
            <td>Цвет</td>
            <td>R, мс</td>
            <td>G, мс</td>
            <td>B, мс</td>
            <td>Цвет</td>
        </tr>
        <tr>
            <td>1.6</td>
            <td>1.2</td>
            <td>0.4</td>
            <td>
                <div style="width: 50px; height: 40px; background-color: rgb(204, 153, 51); margin: 0 auto"></div>
            </td>
            <td>0.4</td>
            <td>0.8</td>
            <td>1.6</td>
            <td>
                <div style="width: 50px; height: 40px; background-color: rgb(51, 102, 204); margin: 0 auto"></div>
            </td>
        </tr>
        <tr>
            <td>0.4</td>
            <td>1.2</td>
            <td>0.4</td>
            <td>
                <div style="width: 50px; height: 40px; background-color: rgb(51, 153, 51); margin: 0 auto"></div>
            </td>
            <td>1.6</td>
            <td>0.8</td>
            <td>1.6</td>
            <td>
                <div style="width: 50px; height: 40px; background-color: rgb(204, 102, 204); margin: 0 auto"></div>
            </td>
        </tr>
        <tr>
            <td>1.2</td>
            <td>0.4</td>
            <td>1.6</td>
            <td>
                <div style="width: 50px; height: 40px; background-color: rgb(153, 51, 204); margin: 0 auto"></div>
            </td>
            <td>0.8</td>
            <td>1.6</td>
            <td>0.4</td>
            <td>
                <div style="width: 50px; height: 40px; background-color: rgb(102, 204, 51); margin: 0 auto"></div>
            </td>
        </tr>
        <tr>
            <td>0.4</td>
            <td>1.6</td>
            <td>1.6</td>
            <td>
                <div style="width: 50px; height: 40px; background-color: rgb(51, 204, 204); margin: 0 auto"></div>
            </td>
            <td>1.6</td>
            <td>0.4</td>
            <td>0.4</td>
            <td>
                <div style="width: 50px; height: 40px; background-color: rgb(204, 51, 51); margin: 0 auto"></div>
            </td>
        </tr>
        <tr>
            <td>0.4</td>
            <td>0.4</td>
            <td>1.6</td>
            <td>
                <div style="width: 50px; height: 40px; background-color: rgb(51, 51, 204); margin: 0 auto"></div>
            </td>
            <td>1.6</td>
            <td>1.6</td>
            <td>0.4</td>
            <td>
                <div style="width: 50px; height: 40px; background-color: rgb(204, 204, 51); margin: 0 auto"></div>
            </td>
        </tr>
    </table>
    <p class="c">Рис. X. Таблица длительности импульсов для различных цветов</p></center>
<br>
<p>Вычислим количество тактов, необходимое для задержки на 1мс. При тактовой частоте 16МГц за 1с МК выполнит 16 000 000 тактов. Значит, для
формирования задержки в 1мс потребуется 16000 тактов. Программную задержку организуем в цикле delay, который будет состоять из 2-х вложенных циклов
со счётчиками в R19, R20. При значениях регистров R19=80<sub>16</sub>, R20=0C, задержка в цикле составит 16011 такт, или 1000,7мкс. Погрешность
составляет 11 тактов, или 687,5нс.</p>

<table width="300" >
    <tr><td><pre><code>.include "m328pdef.inc"

init:
      ldi R16,0b00000111
      out DDRB,R16
      ldi R23,0b00000101 ;RED+BLUE
red_blue:
      ldi R19,0x80     
      ldi R20,0x0C ;1мс     
      eor R22,R23
      out PORTB,R22
delay:      
      subi R19,1
      sbci R20,0
      brcc delay
      rjmp red_blue
</code></pre>
        </td>
    </tr>
</table>

<p>Модель микроконтроллерной системы Arduino для разработанной программы в среде Proteus выглядит следующим образом:</p>
<center><img src="images/lr4_10.png" alt="Рис. X.">
    <p class="c">Рис. X. Выполнение тестового примера с RGB светодиодом</p></center>



<br><br><br><br>


<a name="tit4_2"></a>
<table border=0 cellpadding=0 cellspacing=0 width=97% bgcolor=#ABB3D5>
    <tr>
        <td bgcolor=#000000 colspan=2><img src=../Оболочка/images/raspor.gif height=1></td>
    </tr>
    <tr>
        <td width=30></td>
        <td valign=center><span class=h>Пример решения задачи 4.2.</span></td>
    </tr>
    <tr>
        <td bgcolor=#000000 width="25" colspan="2"><img src=../Оболочка/images/raspor.gif height=1></td>
    </tr>
</table>
<br>


<p><b>Управление линейкой светодиодов.</b> Напишем программу периодического включения/ выключения светодиода,
    подключенного к линии 0 порта B. Время
    включения равно времени выключения, и составляет 0,5с. Частота микроконтроллера 16МГц. Организовать задержку с
    помощью таймера T0 в режиме Normal
    (по переполнению счётного регистра) в режиме с прерываниями.</p>

<p>Известно, что при тактовой частоте 16МГц для формирования задержки на 0,5с. необходимо 8 000 000 тактов.
    Задержка в цикле от одного выполнения <code><span class="class1">out PORTB, r18</span></code> до следующего его
    выполнения составит 7 999 486 такт, или 499967,88мкс. Погрешность составляет
    514 тактов, или 0,000032125с.</p>

<table width="470">
    <tr>
        <td><pre><code>.include "m328pdef.inc"
.cseg
.org 0x0000 jmp Reset       ;Reset
.org 0x0020 jmp TIMER0_OVF  ;Переполнение таймера/счётчика 0
.org INT_VECTORS_SIZE       ;Конец таблицы прерываний

Reset:
      ldi R16, Low(RAMEND)  ;Старт программы
      out SPL, R16          ;Обязательная инициализация стека
      ldi R16, High(RAMEND) ;Указатель стека устанавливается на конец ОЗУ
      out SPH, R16
;           7     6     5     4     3     2     1     0
;TIMSK0 =                               OCIEB OCIEA  TOIE
      ldi R16, 0b00000001
      sts 0x006E, R16       ;Локальное разрешение прерывания для таймера TIMSK0
      sei                   ;Разрешаем прерывания глобально
      ldi R17, 0x04
      out TCNT0, R17        ;Таймер - на 4 тика
;          7     6     5     4     3     2     1     0
;TCCR0B = FOC0A FOC0B            WGM02  CS02  CS01  CS00
      ldi R16, 0b00000101
      out TCCR0B, R16       ;Предделитель на Clk/1024
      ldi R16, 0b00000010
      out DDRB, R16         ;Port B, линия 1 - выход
main:
      cpi R19, 0x1F         ;Пропустить 13 прерываний
      brne main
      eor R18, R16
      out PORTB, R18	    ;Инвертирование линии 0 порта B
      clr R19
      rjmp main             ;Бесконечный цикл

TIMER0_OVF:
      inc R19               ;Счётчик прерываний++
      out TCNT0, R17        ;Перезагрузить счётный регистр
      reti
</code></pre>
        </td>
    </tr>
</table>

<p>Модель микроконтроллерной системы Arduino для разработанной программы в среде Proteus выглядит следующим образом:</p>

<center><img src=images/lr4_01x.gif></center>
<br>
<br>


<p><b>Генерация звуковых сигналов.</b> Напишем программу выдающую сигнал частотой 1000Гц на звуковой динамик,
    подключенный к линии 2 порта C.
    При этом длительность импульса равна длительности паузы (меандр). Частота микроконтроллера 16МГц. Организовать
    задержку с помощью таймера T0 в
    режиме Normal (по переполнению счётного регистра) в режиме с прерываниями.</p>

<p>При тактовой частоте 16МГц длительность импульса, как и длительность паузы сигнала должна продолжаться 8000 тактов.
    Тогда период сигнала будет
    продолжительностью 16000 тактов, т.е. 1/1000 секунды. Это соответствует частоте повторений импульсов 1000Гц.
    Задержка в цикле от одного выполнения <code><span class="class1">out PORTC, r18</span></code> до следующего его
    выполнения составит 16 000 тактов. Погрешность составляет 0%.</p>

<table width="470">
    <tr>
        <td><pre><code>.include "m328pdef.inc"

.org 0x0000 jmp Reset       ;Reset
.org 0x0020 jmp TIMER0_OVF  ;Переполнение таймера/счётчика 0
.org INT_VECTORS_SIZE       ;Конец таблицы прерываний

TIMER0_OVF:
      inc R19               ;Счётчик прерываний++
      out TCNT0, R17        ;Перезагрузить счётный регистр
      reti                  ;Возврат прерываний

Reset:
      ldi R16, Low(RAMEND)  ;Старт программы
      out SPL, R16          ;Обязательная инициализация стека
      ldi R16, High(RAMEND) ;Указатель стека устанавливается на конец ОЗУ
      out SPH, R16
;           7     6     5     4     3     2     1     0
;TIMSK0 =                               OCIEB OCIEA  TOIE
;TCCR0B = FOC0A FOC0B            WGM02  CS02  CS01  CS00
      ldi R16, 0b00000101
      out TCCR0B, R16       ;Предделитель на Clk/1024
;           7     6     5     4     3     2     1     0
;TIMSK0 =                               OCIEB OCIEA  TOIE
      ldi R16, 0b00000001
      sts TIMSK0, R16       ;Локальное разрешение прерывания для TIMER0
      ldi R17, 0x7
      out TCNT0, R17        ;Таймер - на 250 тика
      ldi R16, 0b00000100
      out DDRC, R16         ;Настройка на вывод линии 2 порта C
      sei                   ;Разрешение прерываний

cycle:
      cpi R19, 4            ;пропустить 4 прерываний
      brne cycle
      nop                   ;ничего не делаем один такт
      eor R18, R16
      out PORTC, R18        ;вывод инверсного состояния на линию 2 порта C
      clr R19
      rjmp cycle
</code></pre>
        </td>
    </tr>
</table>

<hr width="90%" Color="#7685C6" Align="Right"><br>

                                </td></tr></table>
                            </center>

                        </td>
                    </tr>
                    <tr>
                        <td ColSpan=2>

<table border=0 cellspacing=0 cellpadding=0>
  <tr>
    <td background=../Оболочка/images/bg1.gif width=458 height=100 valign=Bottom>
      <p class=co>Copyright &copy; БГУИР, Кафедра Систем управления, 2023<br><img src=../Оболочка/images/raspor.gif width=1 height=8></p>
    </td>
    <td background=../Оболочка/images/bg2.gif width=159 height=100>
      <a href=#Top onMouseOver="mOver(7)" onMouseOut="mOut(7)">
	    <img src=../Оболочка/images/07a.gif border=0 alt="К началу документа" name="link7"></a><br>
      <a href=../index.html onMouseOver="mOver(8)" onMouseOut="mOut(8)">
	    <img src=../Оболочка/images/08a.gif border=0 alt="К первой странице" name="link8"></a>
	</td>
  </tr>
</table>

                        </td>
                    </tr>
                </table>
</div>
</body>
</html>